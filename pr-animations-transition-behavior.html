<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./pr-animations-behavior.html">

<script>
  PrAnimationsTransitionBehavior = {

    //var sEffectA = new SequenceEffect(kEffects);
    //var gEffectC = new GroupEffect([sEffectA]);
    //var anim3 = document.timeline.play(gEffectC);
    behaviors: [PrAnimationsBehavior],

    properties: {
      transition: {
        type: Object,
        value: {}
      },
      //in or out
      direction: {
        type: String,
        value: 'in'
      },
      pre: {
        type: Function
      },
      finished: {
        type: Function
      }
    },

    createTransition: function(effect, config) {
      this.prev = config.prev || undefined;
      this.finished = config.finished || undefined;
      this.transition = this.createAnimation(effect);
      this.transition.pause();
    },

    run: function() {
      if (this.direction === 'in') {
        this.direction = 'out';
        this._in();
      } else {
        this.direction = 'in';
        this._out();
      }
    },

    _in: function() {
      if (this.prev)Â {
        this.prev();
      }
      //to prevent reverse
      this.transition.effect.timing.duration = 2000;
      this.transition.playbackRate = 1;
      this.transition.play();
    },

    _out: function() {
      this.transition.effect.timing.duration = 2000;
      if (this.finished) {
        this.transition.onfinish = () => {
          this.finished();
        }
      }
      //same as reverse()
      this.transition.playbackRate = -1;
    }
  }
</script>

